{% extends "base.html" %}

{% block content %}
<script>
    documente.title = Editar Ordem de Compra - Adicionar Item
</script>
<title>document.title</title>
TELA ADICIONAR ITEM À ORDEM DE COMPRA
<div class="container p-3 mb-3 border border-primary div_principal"
     xmlns="http://www.w3.org/1999/html">
    <form action="" method="POST">
        {{form_adicionar_item_ordem_compra.csrf_token}}
        <!-- div1 -->
        <div class="mb-1 float-child-ordem-compra1">
            
            <div class="col form-label btn btn-light">
                {{form_adicionar_item_ordem_compra.data.label}}
                {{form_adicionar_item_ordem_compra.data(class="form-control tam_campo_data",  value=data)}}

                {{form_editar_ordem_compra.pesquisar_ordem_compra.label}}
                   {% if ordem_compra is not none %}
                        {{form_editar_ordem_compra.pesquisar_ordem_compra(class="form-control tam_campo_data", value=form_editar_ordem_compra.ordem_compra.data)}}
                   {% else %}
                       {{form_editar_ordem_compra.pesquisar_ordem_compra(class="form-control tam_campo_data")}}
                   {% endif %}
            </div>
            <div class="col form-label btn btn-light">
                {{form_adicionar_item_ordem_compra.ordem_compra.label}}
                {{form_adicionar_item_ordem_compra.ordem_compra(class="form-control tam_campo_codigo")}}

            </div>
            <div class="col form-label btn btn-light"  >
                preencher fornecedor
            </div>
              <div class="col form-label btn btn-light">
                ordem de compra pesquisada
            </div>

            <br>
            <div class="col form-label btn btn-light">
                {{form_adicionar_item_ordem_compra.ean.label }}
                {{form_adicionar_item_ordem_compra.ean(class="form-control")}}
            </div>
            <div class="col form-label btn btn-light">
                {{form_adicionar_item_ordem_compra.descricao.label}}
                {{form_adicionar_item_ordem_compra.descricao(class="form-control tam_campo_descricao")}}
            </div>
            <br>
<!--                {{form_adicionar_item_ordem_compra.botao_consulta(class="btn btn-primary mt-3")  }}-->
            <br>
            <div class="col form-label btn btn-light">
                {{form_adicionar_item_ordem_compra.quantidade.label }}
               {{form_adicionar_item_ordem_compra.quantidade(class="form-control", value=1) }}
            </div>


            <div class="col form-label btn btn-light">
                {{form_adicionar_item_ordem_compra.preco_unitario.label}}
                {{form_adicionar_item_ordem_compra.preco_unitario(class="form-control", value=0, id="preco_unitario") }}
            </div>

            <div class="btn">
                {{form_adicionar_item_ordem_compra.botao_incluir_item(class="btn btn-primary mt-3") }}
            </div>
             <div class="col form-label btn btn-light">
                Atualizar ordem-------|||||-------Cancelar

            </div>
            <script src="static/js/pesquisa_produto.js" defer></script>
        </div>
            <!-- div2 -->

        gerar lista de itens disponiveis ao entrar na tela
        <div class="float-child-ordem-compra2">
            <div  class="borda_simples  container_com_barra_rolagem">
                <table class="table table-hover table-striped  " style="position:sticky" cellpadding="2" cellspacing="2" id="">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Descrição</th>
                            <th>EAN</th>
                            <th>UN</th>
                            <th>VALOR</th>

                        </tr>
                    </thead>
                <tbody>


                <tr class="width:100%  height:100% table table-hover table-bordered table-striped table-sm table-layout:fixed ">
                    <td>
                        <form method="POST">
                                    {{form_adicionar_item_ordem_compra.hidden_tag() }}
                                    <input type="hidden" name="incluir_item" value=0>
                            {{form_adicionar_item_ordem_compra.botao_selecionar_item(class='btn btn-primary') }}
                        </form>
                    </td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>

                </tr>
                <tr>
                    <td colspan="5">Nenhum fornecedor encontrado</td>
                </tr>
            </tbody>
            </table>
            </div>
        </div>

    </form>

    <div class="mt-5 float-child-ordem-compra">
        <table class="table table-hover table-striped  " style="position:sticky" cellpadding="2" cellspacing="2" id="tabela-itens">

            <thead>
                <tr>
                    <th>Data</th>
                    <th>Ordem de Compra</th>
                    <th>Item</th>
                    <th>Descrição</th>
                    <th>Unidade</th>
                    <th>Categoria</th>
                    <th>Código</th>
                    <th>EAN</th>
                    <th>Quantidade</th>
                    <th>Preço Unitário</th>
                    <th>Total Item</th>

                </tr>
            </thead>
            <tbody>

                {% for i in dicionario_ordem_compra %}
                    {% set contador_item = loop.index0 + 1 %}
                    {% set total_item = i[7] * i[8] %}

                <tr class="width:100%  height:100% table table-hover table-bordered table-striped table-sm table-layout:fixed ">
                    <td>{{i[0] }}</td>
                    <td>{{ordem_compra }}</td>
                    <td>{{contador_item }}</td>
                    <td>{{i[2] }}</td>
                    <td>{{i[3] }}</td>
                    <td>{{i[4] }}</td>
                    <td>{{i[5] }}</td>
                    <td>{{i[6] }}</td>
                    <td>{{i[7] }}</td> <!--quantidade -->

                    <td>{{i[8] }}</td> <!--preco unitario -->
                    <td>{{total_item }}</td> <!--total item -->

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}



</div>